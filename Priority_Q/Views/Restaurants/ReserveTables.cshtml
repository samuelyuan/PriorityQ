@model IEnumerable<Priority_Q.Models.Table>

@{
    ViewBag.Title = "Reserve A Table";
}

<h2>Reserve a Table</h2>

<!-- Display group size -->
<!-- Display available time slots -->
@using (Html.BeginForm("ReserveTables", "Restaurants", FormMethod.Get))
{
    <fieldset>
        Group Size
        @Html.DropDownList("GroupSizeList")

        Time Slot
        @Html.DropDownList("TimeSlotList")
        
        <input class="btn btn-info" type="submit" value="Find A Table" />
    </fieldset>
} 

@if (ViewBag.GroupSize > 0)
{ 
    <!-- The data passed in is a list of tables for a restaurant -->
    <table class="table table-striped table-hover ">
        <!-- contents -->
        @{
        var counter = 1;
        }
    
        @foreach (var item in Model)
        {
            //make sure table can seat enough customers
            if (!item.IsOccupied && item.MaxCapacity >= ViewBag.GroupSize)
            {
                //make sure table hasn't been reserved already
               // if (item.ReservedTimes == null ||
               //     (item.ReservedTimes != null && !item.ReservedTimes.Contains(ViewBag.TimeSlot)))
              //  {
                    <tr>
                        <td>
                            <a class="btn btn-success" href="@String.Format("../../Restaurants/AssignReservation/?tableID={0}&timeSlot={1}", item.ID, ViewBag.TimeSlot)">
                                #@Html.DisplayFor(modelItem => counter) --- [Max: @Html.DisplayFor(modelItem => item.MaxCapacity)]
                            </a>
                        </td>
                    </tr>
               // }
            }
            counter++;
        }

    </table>
}

<p>
    <a class="btn btn-warning" href="@String.Format("../../Restaurants/ViewTables/{0}", ViewBag.RestaurantId)">
        Cancel
    </a>
</p>