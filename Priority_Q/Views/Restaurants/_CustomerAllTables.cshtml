@using System.Globalization;

@{
    ViewBag.Title = "View Full Map";
    var restaurant = ViewData["Restaurant"] as Priority_Q.Models.Restaurant;
    var allTables = ViewData["AllTables"] as IEnumerable<Priority_Q.Models.Table>;
}

<h3>
    Tables Available <span class="label label-default">@ViewBag.AvailableTablesCount / @allTables.Count()</span>
</h3>

<table class="table table-striped table-hover ">
    <!-- contents -->
    @{
        var counter = 1;
        var numPerRow = (int)Math.Truncate(Math.Sqrt(allTables.Count()));
    }

    @foreach (var item in allTables)
    {
        if (counter % numPerRow == 1)
        {
            @:<tr>
        }

        <td>
            <span class="label label-default">#@counter</span> <br />
            @if (!item.IsOccupied)
            {
                <span class="btn btn-success disabled">
                    [Max: @item.MaxCapacity <span class="glyphicon glyphicon-user"></span>]
                </span>
            }
            else
            {
                <span class="btn btn-danger disabled">
                    [Max: @item.MaxCapacity <span class="glyphicon glyphicon-user"></span>]
                </span>
            }
        </td>

        counter++;

        if (counter % numPerRow == 1)
        {
            @: </tr>
        }
    }

</table>
