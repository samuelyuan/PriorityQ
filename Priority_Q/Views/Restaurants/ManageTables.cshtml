@model IEnumerable<Priority_Q.Models.Table>

@{
    ViewBag.Title = "Manage Tables";
}

<h2>Restaurant: @ViewBag.RestaurantName</h2>
<h3>Tables
    <span class="label label-default">
        @ViewBag.AvailableTables / @ViewBag.TotalTables
    </span>
    &nbsp;
    @if (Request.IsAuthenticated && ViewBag.OwnsRestaurant)
    {
        //create a new table just for that restaurant
        <a class="btn btn-info" href='@string.Format("/Tables/Create/{0}", ViewBag.RestaurantId)'>
            +
        </a>
    }
</h3>

<!-- The data passed in is a list of tables for a restaurant -->
<table class="table table-striped table-hover ">
    <!-- contents -->
    @{
        var counter = 1;
    }
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @if (!item.IsOccupied)
                {
                    <span class="btn btn-success disabled">
                        #@Html.DisplayFor(modelItem => counter) --- [Max: @Html.DisplayFor(modelItem => item.MaxCapacity)]
                    </span>
                }
                else
                {
                    <span class="btn btn-danger disabled">
                        #@Html.DisplayFor(modelItem => counter) --- [Max: @Html.DisplayFor(modelItem => item.MaxCapacity)]
                    </span>
                }
                @if (Request.IsAuthenticated && ViewBag.OwnsRestaurant)
                {
                     //only logged in users should be able to edit and delete
                    //best if only the user modifies their own restaurant and not someone else's
                    <a class="btn btn-warning" href='@string.Format("/Tables/Edit/{0}", item.ID)'> Edit </a>
                }
            </td>
            <td>
                @if (Request.IsAuthenticated && ViewBag.OwnsRestaurant)
                {
                     //only logged in users should be able to edit and delete
                    //best if only the user modifies their own restaurant and not someone else's
                    <a class="btn btn-danger" href='@string.Format("/Tables/Delete/{0}", item.ID)'> Delete </a>
                }
            </td>
        </tr>
        counter++;
    }
</table>


