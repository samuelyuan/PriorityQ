@model IEnumerable<Priority_Q.Models.Table>

@{
    ViewBag.Title = "Assign Table";
    var restaurant = ViewData["Restaurant"] as Priority_Q.Models.Restaurant;
    var customer = ViewData["ReadyCustomer"] as Priority_Q.Models.Customer;
}


<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title" id="myModalLabel">Assign Table</h4>
</div>

<div class="modal-body">

    <h3>Customer "@customer.Name", Party of @customer.GroupCapacity</h3>

    <!-- The data passed in is a list of tables for a restaurant -->
    <table class="table table-striped table-hover ">
        <!-- contents -->
        @{
            var counter = 1;
            var numPerRow = (int)Math.Truncate(Math.Sqrt(Model.Count()));
        }

        @foreach (var item in Model)
        {
            if (counter % numPerRow == 1)
            {
                @:<tr>
            }

            if (!item.IsOccupied)
            {
                if (item.MaxCapacity >= customer.GroupCapacity)
                {
                    <td>
                        <span class="label label-default">#@counter</span> <br />
                        <a class="btn btn-success" href="@String.Format("../../Restaurants/AssignTable/?tableID={0}&customerID={1}", item.ID, customer.ID)">
                            [Max: @item.MaxCapacity <span class="glyphicon glyphicon-user"></span>]
                        </a>
                    </td>
                }
                else
                {
                    <td>
                        <span class="label label-default">#@counter</span> <br />
                        <span class="btn btn-default disabled" href="@String.Format("../../Restaurants/AssignTable/?tableID={0}&customerID={1}", item.ID, customer.ID)">
                            [Max: @item.MaxCapacity <span class="glyphicon glyphicon-user"></span>]
                        </span>
                    </td>
                }
            }
            else
            {
                <td>
                    <span class="label label-default">#@counter</span> <br />
                    <span class="btn btn-danger disabled" href="@String.Format("../../Restaurants/AssignTable/?tableID={0}&customerID={1}", item.ID, customer.ID)">
                        [Max: @item.MaxCapacity <span class="glyphicon glyphicon-user"></span>]
                    </span>
                </td>
            }

            counter++;

            if (counter % numPerRow == 1)
            {
                @:</tr>
            }
        }
    </table>
</div>

<div class="modal-footer">
    <a class="btn btn-danger" href="@String.Format("../../Customers/Delete/{0}", customer.ID)">
        Remove Only
    </a>
    <a class="btn btn-warning" href="@String.Format("../../Restaurants/ViewTables/{0}", restaurant.ID)">
        Cancel
    </a>
</div>
