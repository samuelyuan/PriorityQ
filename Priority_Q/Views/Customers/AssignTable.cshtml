@model IEnumerable<Priority_Q.Models.Table>

@{
    ViewBag.Title = "Assign Table";
}

<h2>Assign Table</h2>
<h3>Customer "@ViewBag.CustomerName", Party of @ViewBag.CustomerGroupSize</h3>

<!-- The data passed in is a list of tables for a restaurant -->
<table class="table table-striped table-hover ">
    <!-- contents -->
    @{
        var counter = 1;
        var numPerRow = (int)Math.Truncate(Math.Sqrt(Model.Count()));
    }
    
    @foreach (var item in Model)
    {
        if (counter % numPerRow == 1)
        {
            @:<tr>
        }

        if (!item.IsOccupied)
        {
            if (item.MaxCapacity >= ViewBag.CustomerGroupSize)
            {
                <td>
                    <span class="label label-default">#@counter</span> <br />
                    <a class="btn btn-success" href="@String.Format("../../Restaurants/AssignTable/?tableID={0}&customerID={1}", item.ID, ViewBag.CustomerID)">
                        [Max: @item.MaxCapacity <span class="glyphicon glyphicon-user"></span>]
                    </a>
                </td>
            }
            else
            {
                <td>
                    <span class="label label-default">#@counter</span> <br />
                    <span class="btn btn-default disabled" href="@String.Format("../../Restaurants/AssignTable/?tableID={0}&customerID={1}", item.ID, ViewBag.CustomerID)">
                        [Max: @item.MaxCapacity <span class="glyphicon glyphicon-user"></span>]
                    </span>
                </td>
            }
        }
        else
        {
            <td>
                <span class="label label-default">#@counter</span> <br />
                <span class="btn btn-danger disabled" href="@String.Format("../../Restaurants/AssignTable/?tableID={0}&customerID={1}", item.ID, ViewBag.CustomerID)">
                    [Max: @item.MaxCapacity <span class="glyphicon glyphicon-user"></span>]
                </span>
            </td>
        }
        
        counter++;

        if (counter % numPerRow == 1)
        {
            @:</tr>
        }
    }
</table>

<p>
    <a class="btn btn-danger" href="@String.Format("../../Customers/Delete/{0}", ViewBag.CustomerID)">
        Remove Only
    </a>
    <a class="btn btn-warning" href="@String.Format("../../Restaurants/ViewTables/{0}", ViewBag.RestaurantId)">
        Cancel
    </a>
</p>